---
import Layout from "@/layouts/main.astro";
import trpc from "@/trpc/client";

export async function getStaticPaths() {
  const posts = await trpc.posts.findAll.query({ status: "published" });

  return posts.map((post) => ({
    params: { slug: post.slug },
    props: { post },
  }));
}

const { post } = Astro.props;
---

<Layout>
  <main
    class="flex h-screen flex-1 flex-col items-center justify-center py-2"
    transition:animate="slide"
  >
    <section
      class="flex w-3/6 flex-col items-center justify-center gap-16 pt-8 max-md:w-5/6"
    >
      <h1>{post.title}</h1>
      <p>
        {post.publishDate && post.publishDate.toDateString()}
      </p>

      <article>{post.content}</article>
    </section>
  </main>
</Layout>
