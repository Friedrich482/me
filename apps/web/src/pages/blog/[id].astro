---
import Layout from "@/layouts/main.astro";
import type { Post } from "@/types-schemas";
import ContentSection from "@/components/posts/ContentSection";

export async function getStaticPaths() {
  const response = await fetch("https://dummyjson.com/posts");
  const data = await response.json();
  const posts: Post[] = data.posts;

  return posts.map((post) => ({
    params: { id: String(post.id) },
  }));
}

const { id } = Astro.params;

const res = await fetch(`https://dummyjson.com/posts/${id}`);
const post = await res.json();
---

<Layout>
  <main
    class="flex h-screen flex-1 flex-col items-center justify-center py-2"
    transition:animate="slide"
  >
    <ContentSection post={post} />
  </main>
</Layout>
